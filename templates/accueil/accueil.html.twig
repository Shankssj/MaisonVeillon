{% extends 'base.html.twig' %}

{% block title %}Accueil
{% endblock %}

{% block body %}
	<section id="backgroung-home">
		<div class="background-home">
			<img class="img-home" src="https://i.postimg.cc/TYGSz8vY/La-Guitti-re.jpg" alt="Plage de la guittière Talmont Saint Hilaire">
			<div class="home-title">
				<h1>Votre Escapade Vendéenne</h1>
			</div>
			<div class="scroll-arrow">
				&#8595;
				<!-- Flèche vers le bas Unicode -->
			</div>
		</div>
	</section>

	<section id="presentation">
		<div class="container">
			<h2 class="section-title">Votre séjour commence ici, bienvenue !</h2>
			<p class="section-subtitle">
				Découvrez notre charmante maison de vacances à Talmont Saint Hilaire, avec tous les équipements nécessaires pour un séjour parfait.
			</p>

			<div class="highlight-cards">
				<div class="highlight-card">
					<div class="icon">&#10084;</div>
					<h4>Coup de cœur voyageurs</h4>
					<p>Un des logements préférés des voyageurs sur Airbnb</p>
					<div class="rating">⭐️ 5,0</div>
				</div>
				<div class="highlight-card">
					<div class="icon">&#127958;</div>
					<h4>Pour vos moments en plein air</h4>
					<p>Espace repas et salon extérieur parfait pour vos voyages d'été.</p>
				</div>
				<div class="highlight-card">
					<div class="icon">&#128273;</div>
					<h4>Arrivée autonome</h4>
					<p>Entrée sécurisée via boîte à clé.</p>
				</div>
			</div>

			<div class="amenities-section">
				<h3>Ce que propose ce logement</h3>
				<div class="amenities-grid">
					<div class="amenity">
						<div class="icon">&#128705;</div>
						<p>Salle de bain - Eau chaude</p>
					</div>
					<div class="amenity">
						<div class="icon">&#128719;</div>
						<p>Lave-linge gratuit</p>
					</div>
					<div class="amenity">
						<div class="icon">&#128230;</div>
						<p>TV HD et livres</p>
					</div>
					<div class="amenity">
						<div class="icon">&#127774;</div>
						<p>Mobilier d'extérieur</p>
					</div>
					<div class="amenity">
						<div class="icon">&#128640;</div>
						<p>Wifi rapide</p>
					</div>
					<div class="amenity">
						<div class="icon">&#127859;</div>
						<p>Cuisine équipée (réfrigérateur, micro-ondes, four, cafetière)</p>
					</div>
					<div class="amenity">
						<div class="icon">&#128663;</div>
						<p>Parking gratuit sur place et dans la rue</p>
					</div>
					<div class="amenity">
						<div class="icon">&#128100;</div>
						<p>Barrières de sécurité pour bébé</p>
					</div>
				</div>
			</div>

			<div class="reviews-section">
				<h3>Évaluation globale</h3>
				<div class="reviews-overall">
					<div class="overall-score">
						<div class="score-number">5,0</div>
						<div class="score-label">Coup de cœur voyageurs</div>
						<p class="score-description">
							Ce logement fait partie des Coups de cœur voyageurs, à partir des évaluations, commentaires et de la fiabilité des annonces selon les voyageurs.
						</p>
					</div>
					<div class="categories">
						<div class="category">
							<div class="category-name">Propreté</div>
							<div class="category-score">5,0</div>
							<div class="category-icon">&#128167;</div>
							<div class="category-bar">
								<div class="category-bar-fill" style="width:100%"></div>
							</div>
						</div>
						<div class="category">
							<div class="category-name">Précision</div>
							<div class="category-score">5,0</div>
							<div class="category-icon">&#10004;</div>
							<div class="category-bar">
								<div class="category-bar-fill" style="width:100%"></div>
							</div>
						</div>
						<div class="category">
							<div class="category-name">Arrivée</div>
							<div class="category-score">5,0</div>
							<div class="category-icon">&#128273;</div>
							<div class="category-bar">
								<div class="category-bar-fill" style="width:100%"></div>
							</div>
						</div>
						<div class="category">
							<div class="category-name">Communication</div>
							<div class="category-score">5,0</div>
							<div class="category-icon">&#128172;</div>
							<div class="category-bar">
								<div class="category-bar-fill" style="width:100%"></div>
							</div>
						</div>
						<div class="category">
							<div class="category-name">Emplacement</div>
							<div class="category-score">4,8</div>
							<div class="category-icon">&#128506;</div>
							<div class="category-bar">
								<div class="category-bar-fill" style="width:96%"></div>
							</div>
						</div>
						<div class="category">
							<div class="category-name">Qualité-prix</div>
							<div class="category-score">4,7</div>
							<div class="category-icon">&#128176;</div>
							<div class="category-bar">
								<div class="category-bar-fill" style="width:94%"></div>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</section>


	<section id="detail-maison">
		<div class="row">
			<div id="titre_presentation">
				<h3>Venez découvrir l'intérieur</h3>
				<div class="trait-design"></div>
			</div>
		</div>
		<div class="row mes-cards">
			{% for piece in leDetail %}
				<div class="col-md-6">
					<div class="card">
						<div class="card-imgs carousel" data-piece="{{ loop.index }}">
							{% set photos = piece.getPhotos() %}
							{% if photos|length > 0 %}
								<img class="card-img" src="{{ photos[0].getLienPhoto() }}" alt="Photo de {{ piece.getNomPiece() }}">
								<div class="carousel-controls">
									<button class="carousel-btn prev" data-piece="{{ loop.index }}" aria-label="Précédent">
										<span>&#10094;</span>
									</button>
									<span class="carousel-indicator">
										<span class="current-index">1</span>/<span class="total-index">{{ photos|length }}</span>
									</span>
									<button class="carousel-btn next" data-piece="{{ loop.index }}" aria-label="Suivant">
										<span>&#10095;</span>
									</button>
								</div>
							{% endif %}
						</div>
						<div class="card-details">
							<h4 class="card-title">{{ piece.getNomPiece() }}</h4>
							<p class="text-title">{{ piece.getDescriptionPiece() }}</p>
						</div>
						 <script type="application/json" id="photos-{{ loop.index }}">
																																																																																																																																										                    {{ photos|map(p => p.getLienPhoto())|json_encode|raw }}
																																																																																																																																										                </script>
					</div>
				</div>
			{% endfor %}
		</div>
	</section>
	<style>

		/* Section background-home */
		.background-home {
			position: relative;
			width: 100%;
			height: 100%;
			overflow: hidden;
		}

		.img-home {
			width: 100%;
			height: auto;
			object-fit: cover;
			filter: brightness(70%);
		}

		.home-title h1 {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			color: white;
			text-align: center;
			font-size: 5rem;
			font-family: 'Pacifico', cursive;
		}

		.scroll-arrow {
			position: absolute;
			bottom: 50px;
			left: 50%;
			transform: translateX(-50%);
			font-size: 5rem;
			color: white;
			opacity: 0.8;
			animation: bounce 1s infinite;
			z-index: 2;
		}

		@keyframes bounce {
			0,
			100% {
				transform: translateX(-50%) translateY(0);
			}
			50% {
				transform: translateX(-50%) translateY(15px);
			}
		}
		/* Fin Section background-home */

		/* Section presentation */
		.row {
			display: flex;
			align-items: center;
			gap: 40px;
			margin-bottom: 80px;
		}
		/* --- Section Présentation --- */
		#presentation {
			padding: 80px 20px;
			background: #f7f9fb;
			text-align: center;
		}

		.section-title {
			font-size: 3rem;
			color: #0077b6;
			font-family: 'Pacifico', cursive;
			margin-bottom: 15px;
		}

		.section-subtitle {
			max-width: 900px;
			margin: 0 auto 50px;
			font-size: 1.2rem;
			color: #444;
			font-family: 'Montserrat', sans-serif;
		}

		.highlight-cards {
			display: flex;
			flex-wrap: wrap;
			justify-content: center;
			gap: 30px;
			margin-bottom: 50px;
		}

		.highlight-card {
			background: #fff;
			border-radius: 24px;
			padding: 25px;
			width: 250px;
			box-shadow: 0 8px 24px rgba(0, 119, 182, 0.08);
			transition: transform 0.3s, box-shadow 0.3s;
		}

		.highlight-card:hover {
			transform: translateY(-10px);
			box-shadow: 0 16px 36px rgba(0, 119, 182, 0.15);
		}

		.highlight-card .icon {
			font-size: 2.5rem;
			color: #ff2277;
			margin-bottom: 10px;
		}

		.highlight-card .rating {
			margin-top: 8px;
			font-size: 1.2rem;
			color: #0077b6;
			font-weight: bold;
		}

		.amenities-section {
			margin-top: 60px;
		}

		.amenities-section h3 {
			font-size: 2rem;
			margin-bottom: 25px;
			color: #0077b6;
		}

		.amenities-grid {
			display: grid;
			grid-template-columns: repeat(4, 1fr); /* 4 items par ligne */
			gap: 20px;
		}

		@media(max-width: 1024px) {
			.amenities-grid {
				grid-template-columns: repeat(2, 1fr); /* 2 items par ligne sur tablette */
			}
		}

		@media(max-width: 600px) {
			.amenities-grid {
				grid-template-columns: 1fr; /* 1 item par ligne sur mobile */
			}
		}

		.amenity {
			background: #fff;
			border-radius: 16px;
			padding: 15px;
			display: flex;
			align-items: center;
			gap: 10px;
			box-shadow: 0 4px 12px rgba(0, 119, 182, 0.05);
			font-family: 'Montserrat', sans-serif;
			font-size: 0.95rem;
		}

		.amenity .icon {
			font-size: 1.8rem;
			color: #ff2277;
		}

		.reviews-section {
			padding: 50px 20px;
			background: #f7f9fb;
			text-align: center;
		}
		.reviews-section h3 {
			font-size: 2.5rem;
			margin-bottom: 20px;
			color: #0077b6;
		}

		.overall-score {
			margin-bottom: 40px;
		}

		.score-number {
			font-size: 3rem;
			font-weight: bold;
			color: #000;
		}

		.score-label {
			font-size: 1.6rem;
			margin-top: 5px;
			font-weight: bold;
			color: #0077b6;
		}

		.score-description {
			font-size: 1.2rem;
			color: #555;
			max-width: 600px;
			margin: 10px auto 0;
		}

		.categories {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
			gap: 20px;
			max-width: 900px;
			margin: 0 auto; 
			justify-content: center;
			text-align: center;
		}

		.category {
			display: flex;
			flex-direction: column;
			align-items: center; /* centrer le contenu horizontalement */
			gap: 4px;
		}

		.category-name {
			font-weight: 500;
			font-size: 0.95rem;
		}

		.category-score {
			font-weight: bold;
			color: #0077b6;
			font-size: 1rem;
		}

		.category-icon {
			font-size: 1.2rem;
			color: #ff2277;
		}

		.category-bar {
			width: 100%;
			height: 6px;
			background: #e0e0e0;
			border-radius: 3px;
			overflow: hidden;
		}

		.category-bar-fill {
			height: 100%;
			background: #0077b6;
			border-radius: 3px;
		}

		@media(max-width: 768px) {
			.categories {
				grid-template-columns: repeat(auto-fit, minmax(100%, 1fr));
			}
		}

		@media(max-width: 768px) {
			.highlight-cards {
				flex-direction: column;
				gap: 20px;
			}
		}

		/* Fin Section presentation */

		/* Section Détails maison */
		#detail-maison {
			padding: 60px 20px;
			background-color: #ffffff;
			text-align: center;
		}
		#detail-maison h3 {
			font-size: 3.5rem;
			color: #0077b6;
			font-family: 'Pacifico', cursive;
			margin-bottom: 20px;
		}

		.col-md-6 {
			flex: 0 0 48%;
			max-width: 48%;
			margin-bottom: 40px;
		}

		.mes-cards {
			justify-content: center;
			gap: 30px;
			align-items: stretch;
		}

		.card {
			background: linear-gradient(135deg, #f8f9fa 80%, #e3f2fd 100%);
			border-radius: 32px;
			box-shadow: 0 6px 24px rgba(0, 119, 182, 0.07), 0 1.5px 6px rgba(255, 34, 119, 0.07);
			padding: 32px 24px 24px;
			text-align: center;
			min-height: 420px;
			display: flex;
			flex-direction: column;
			align-items: center;
			height: 100%;
			box-sizing: border-box;
			border: none;
			transition: transform 0.3s cubic-bezier(0.4,2,0.3,1), box-shadow 0.3s, background 0.3s;
			position: relative;
			overflow: hidden;
		}

		.card:hover {
			transform: translateY(-12px) scale(1.03);
			box-shadow: 0 16px 32px rgba(0, 119, 182, 0.13), 0 4px 16px rgba(255, 34, 119, 0.13);
			background: linear-gradient(135deg, #e3f2fd 60%, #f8f9fa 100%);
		}

		.card-imgs {
			width: 80%;
			display: flex;
			flex-direction: column;
			align-items: center;
			margin-bottom: 18px;
		}

		.card-img {
			width: 90%;


			border-radius: 24px;
			object-fit: cover;
			box-shadow: 0 4px 16px rgba(0, 119, 182, 0.09);
			margin-bottom: 18px;
			transition: box-shadow 0.3s;
		}

		.card:hover .card-img {
			box-shadow: 0 8px 32px rgba(255, 34, 119, 0.13);
		}

		.carousel-controls {
			display: flex;
			justify-content: center;
			align-items: center;
			gap: 18px;
			margin-top: 12px;
		}

		.carousel-btn {
			background: #fff;
			color: #0077b6;
			border: 2px solid #0077b6;
			border-radius: 50%;
			width: 38px;
			height: 38px;
			font-size: 1.7rem;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			box-shadow: 0 2px 6px rgba(0, 0, 0, 0.07);
			transition: background 0.2s, color 0.2s, border 0.2s;
		}
		.carousel-btn:hover {
			background: #0077b6;
			color: #fff;

		}

		.carousel-indicator {
			font-size: 1.1rem;
			color: #0077b6;
			font-family: 'Fredoka', sans-serif;
			min-width: 48px;
			text-align: center;
		}

		.card-title {
			text-align: center;
			font-size: 2.5rem;
			color: #ff2277ff;
			margin-top: 18px;
			margin-bottom: 10px;
			font-family: 'Fredoka', sans serif;
		}
		.text-title {
			font-size: 1.2rem;
			color: #000;
			flex-grow: 1;
			font-family: 'monserrat', sans-serif;
			text-align: center;
		}

		@media(max-width: 900px) {
			.row {
				flex-direction: column !important;
				gap: 24px;
				align-items: stretch;
			}
			.col,
			.col-md-6 {
				max-width: 100% !important;
				width: 100% !important;
				flex: 1 1 100% !important;
				margin-bottom: 24px;
			}
		}

		@media(max-width: 1200px) {
			.row {
				flex-direction: column !important;
				gap: 24px;
				align-items: stretch;
			}
			.col,
			.col-md-6 {
				max-width: 100% !important;
				width: 100% !important;
				flex: 1 1 100% !important;
				margin-bottom: 24px;
			}
		}
		/* Fin Section Détails maison */
	</style>

	 <script>
																					document.addEventListener("DOMContentLoaded", function() {
																					    document.querySelectorAll('.carousel').forEach(function(carousel) {
																					        const pieceId = carousel.getAttribute('data-piece');
																					        const photosData = document.getElementById('photos-' + pieceId);
																					        if (!photosData) return;
																					        const photos = JSON.parse(photosData.textContent);
																					        let current = 0;
																					        const img = carousel.querySelector('.card-img');
																					        const prevBtn = carousel.querySelector('.prev');
																					        const nextBtn = carousel.querySelector('.next');
																					        const currentIndexSpan = carousel.querySelector('.current-index');
																					        const totalIndexSpan = carousel.querySelector('.total-index');
																					        if (totalIndexSpan) totalIndexSpan.textContent = photos.length;
																					
																					        function updateImg(nextIdx) {
																					            img.style.opacity = 0.4;
																					            setTimeout(() => {
																					                img.src = photos[nextIdx];
																					                img.style.opacity = 1;
																					            }, 200);
																					            if (currentIndexSpan) currentIndexSpan.textContent = nextIdx + 1;
																					        }
																					
																					        if (prevBtn && nextBtn && photos.length > 1) {
																					            prevBtn.addEventListener('click', function(e) {
																					                e.preventDefault();
																					                current = (current - 1 + photos.length) % photos.length;
																					                updateImg(current);
																					            });
																					            nextBtn.addEventListener('click', function(e) {
																					                e.preventDefault();
																					                current = (current + 1) % photos.length;
																					                updateImg(current);
																					            });
																					        } else {
																					            if (prevBtn) prevBtn.style.display = 'none';
																					            if (nextBtn) nextBtn.style.display = 'none';
																					            if (carousel.querySelector('.carousel-indicator')) carousel.querySelector('.carousel-indicator').style.display = 'none';
																					        }
																					    });
																					});
																	</script>
	{% include 'footer.html.twig' %}
{% endblock %}
